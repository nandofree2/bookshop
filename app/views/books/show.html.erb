<div class="row">
  <div class="col-md-4">
    <% if @book&.cover_image&.attached? %>
      <%= image_tag @book.cover_image, class: "img-fluid rounded" %>
    <% end %>

  </div>
  <div class="col-md-8">
    <h3><%= @book.name %></h3>
    <p>Category: <%= @book.category.name %></p>
    <p>Price: $<%= @book.price %></p>
    <p>Rating: <%= "⭐" * @book.rating.to_i %></p>
    <p><span class="badge bg-info"><%= @book.flag.humanize %></span></p>
  </div>
</div>

<hr>

<h4>Comments</h4>
<% @comments.each do |comment| %>
  <div class="border p-2 mb-2 rounded">
    <strong><%= comment.user.name %></strong> (<%= comment.user.role.name %>):  
    <p><%= comment.content %></p>
  </div>
<% end %>

<% if current_user %>
  <%= form_with model: [@book, @comment], local: true do |f| %>
    <div class="mb-3">
      <%= f.text_area :content, class: "form-control", placeholder: "Write a comment..." %>
    </div>
    <%= f.submit "Add Comment", class: "btn btn-primary" %>
  <% end %>
<% else %>
  <p>Please <%= link_to "login", login_path %> to comment.</p>
<% end %>